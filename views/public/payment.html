<!DOCTYPE html>
<html lang="es">

<head>
    <title>Procesar Pago - Coffee Shop</title>
    <meta charset="utf-8">
    <meta name="author" content="Daniel Carranza">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="image/png" rel="icon" href="../../resources/img/icon.png">
    <link type="text/css" rel="stylesheet" href="../../resources/css/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="../../resources/css/bootstrap-icons.min.css">
    <!-- Widget de Wompi -->
    <script src="https://checkout.wompi.co/widget.js"></script>
</head>

<body>
    <!-- Contenido principal del documento -->
    <main class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <!-- Título del contenido principal -->
                <h4 id="mainTitle" class="text-center mb-4">Procesar Pago</h4>
                
                <!-- Resumen del pedido -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5>Resumen del Pedido</h5>
                    </div>
                    <div class="card-body">
                        <div id="orderSummary"></div>
                        <hr>
                        <div class="text-end">
                            <strong>Total a Pagar: $<span id="totalAmount">0.00</span></strong>
                        </div>
                    </div>
                </div>
                
                <!-- Formulario de información del cliente -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5>Información del Cliente</h5>
                    </div>
                    <div class="card-body">
                        <form id="customerForm">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="fullName" class="form-label">Nombre Completo *</label>
                                    <input type="text" class="form-control" id="fullName" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label">Correo Electrónico *</label>
                                    <input type="email" class="form-control" id="email" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="phone" class="form-label">Teléfono *</label>
                                    <input type="tel" class="form-control" id="phone" required>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- Área del widget de pago -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5>Información de Pago</h5>
                    </div>
                    <div class="card-body">
                        <form id="cardForm">
                            <div class="row">
                                <div class="col-md-12 mb-3">
                                    <label for="cardNumber" class="form-label">Número de Tarjeta *</label>
                                    <input type="text" class="form-control" id="cardNumber" 
                                           placeholder="4242 4242 4242 4242" 
                                           maxlength="19" required>
                                    <div class="form-text">
                                        💳 Prueba: 4242424242424242 (Visa) o 5555555555554444 (Mastercard)
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="cardExpiry" class="form-label">Fecha de Vencimiento *</label>
                                    <input type="text" class="form-control" id="cardExpiry" 
                                           placeholder="MM/AA" maxlength="5" required>
                                    <div class="form-text">Prueba: 12/25</div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="cardCvc" class="form-label">CVC *</label>
                                    <input type="text" class="form-control" id="cardCvc" 
                                           placeholder="123" maxlength="4" required>
                                    <div class="form-text">Prueba: 123</div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 mb-3">
                                    <label for="cardName" class="form-label">Nombre en la Tarjeta *</label>
                                    <input type="text" class="form-control" id="cardName" 
                                           placeholder="Juan Pérez" required>
                                </div>
                            </div>
                        </form>
                        
                        <div class="mt-3">
                            <button type="button" class="btn btn-primary btn-lg w-100" id="processPaymentBtn">
                                <i class="bi bi-credit-card-fill"></i> Procesar Pago
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Loading indicator -->
                <div id="loadingIndicator" class="text-center" style="display: none;">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Procesando...</span>
                    </div>
                    <p class="mt-2">Procesando su pago, por favor espere...</p>
                </div>
                
                <!-- Botones de navegación -->
                <div class="text-center mb-4">
                    <a href="cart.html" class="btn btn-secondary">
                        <i class="bi bi-arrow-left"></i> Volver al Carrito
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- SCRIPTS -->
    <script type="text/javascript" src="../../resources/js/sweetalert.min.js"></script>
    <script type="text/javascript" src="../../resources/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="../../controllers/utils/components.js"></script>
    <script type="text/javascript" src="../../controllers/utils/public.js"></script>
    <script type="text/javascript" src="../../controllers/public/payment.js"></script>
</body>

</html>
